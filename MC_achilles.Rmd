---
title: "Bioinfo 4"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

load("/Users/moritzcarlonaeumann/Documents/GitHub/2021-topic-01-team-04/Data/cellline_datasets.rda")
load("/Users/moritzcarlonaeumann/Documents/GitHub/2021-topic-01-team-04/Data/prism_datasets.rda")
```
Junk
```{r}
which(prism.cl[,20] %in% rownames(prism.achilles))
for(n in 1:481) {prism.cl[n,20] %in% rownames(prism.achilles)}
keep.rows = apply(prism.cl,1,function(x){prism.cl[x,1] %in% rownames(prism.achilles) })
```
Sort Prism.cl by depmap_id resulting in prism.cl.ordered
```{r}
prism.cl[1:3,1:3]

order(prism.cl$DepMap_ID)
prism.cl.ordered <- prism.cl[order(prism.cl$DepMap_ID),]
dim(prism.cl.ordered)

rownames(prism.cl.ordered) <- 1:481
rownames(prism.cl.ordered)[1:30]
prism.cl.ordered[1:30,1:3]

```



```{r}
a <- c(1:481)

for(n in 1:481) {a[n] <- (prism.cl.ordered[n,1] %in% rownames(prism.achilles))}
prism.cl.ordered[1:3,]
b <- which(a == 0)
prism.cl.ordered.achilles <- prism.cl.ordered[-b, ]
rownames(prism.cl.ordered.achilles) <- 1:350

dim(prism.cl.ordered.achilles)
prism.cl.ordered.achilles
dim(prism.cl.ordered)
prism.cl.ordered.achilles[1:10,1]
rownames(prism.achilles)[1:10]
```

Find PanCan Cellines in prism.cl.achilles
```{r}
prism.cl.pancan.rownumbers <- c(which(prism.cl.ordered.achilles[,20] == 'Pancreatic Cancer'))
prism.cl.pancan.rownumbers
pancan.cl.names <- prism.cl.ordered.achilles[prism.cl.pancan.rownumbers,1]
pancan.cl.names

which(prism.cl.achilles[,20] == 'Pancreatic Cancer')

prism.cl.ordered.achilles[prism.cl.pancan.rownumbers,20]
rownames(prism.achilles)[prism.cl.pancan.rownumbers]
```
```{r}
prism.cl.ordered.achilles[1:50,20]
prism.cl.ordered.achilles[1:50,1]
```



```{r}
rownames(prism.cl.ordered.achilles)[1:10]
prism.cl.ordered.achilles[1:350,1]
rownames(prism.achilles)[1:350]
```


The data frame prism.achilles consists of gene knockdown scores. The score is a measure of how essential/important is a particular gene for the cell survival. This score reflects whether upon knocking down that genes does the cell reduce its proliferation or increases it or has no change. Smaller values refers to higher essentiality. The rows of this matrix are the gene names and the columns are the cancer cell line identifiers.

Exploration
```{r}
dim(prism.achilles)
prism.achilles[1:10,]
```


```{r}
prism.cl.pancan
prism.achilles.pancan <- prism.achilles[prism.cl.pancan,]
prism.achilles.pancan[1:10,]
```

Cleanup of prism.achilles 
na removal
```{r}

which(is.na(prism.achilles[,14]))
prism.achilles[275:280,14]
prism.achilles[320:325,14]
which(is.na(prism.achilles))
```
```{r}
z <- c(1:350)
for(n in 1:350) {z[n] <- sum(is.na(prism.achilles[n,]))}
z
```
```{r}
sum(is.na(prism.achilles[277,]))
sum(is.na(prism.achilles[309,]))
sum(is.na(prism.achilles[323,]))
```

## Including Plots for prism.achilles.pancan


```{r}
prism.achilles.pancan.numeric <- apply(prism.achilles.pancan, 2, as.numeric)
prism.achilles.numeric <- apply(prism.achilles, 2, as.numeric)
```

```{r}
is.numeric(prism.achilles.pancan.numeric[1:2,2])
hist(prism.achilles.pancan.numeric[1,])
hist(prism.achilles.numeric[1,])
quantile(prism.achilles.pancan.numeric,probs=seq(0,1,.1))
```
```{r}
quantile(na.omit(prism.achilles.numeric,probs=seq(0,1,.1)))
prism.achilles.numeric.no.na <- na.omit(prism.achilles.numeric)
```
```{r}
prism.achilles.numeric.no.na <- rbind(prism.achilles.numeric.no.na, apply(prism.achilles.numeric.no.na,2,mean))
dim(prism.achilles.numeric.no.na)
prism.achilles.numeric.no.na[345:348,1:5]
rownames(prism.achilles.numeric.no.na) <- rownames(prism.achilles)
```
```{r}
summary()
```

