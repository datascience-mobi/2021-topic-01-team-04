---
title: "Bioinfo 4"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

load("/Users/moritzcarlonaeumann/Documents/GitHub/2021-topic-01-team-04/Data/cellline_datasets.rda")
load("/Users/moritzcarlonaeumann/Documents/GitHub/2021-topic-01-team-04/Data/prism_datasets.rda")
```
Junk
```{r}
which(prism.cl[,20] %in% rownames(prism.achilles))
for(n in 1:481) {prism.cl[n,20] %in% rownames(prism.achilles)}
keep.rows = apply(prism.cl,1,function(x){prism.cl[x,1] %in% rownames(prism.achilles) })
```

Cleanup of prism.achilles 
na removal
```{r}
which(is.na(prism.achilles[,14]))
prism.achilles[275:280,14]
prism.achilles[320:325,14]
```


------- na test
z <- c(1:350)
for(n in 1:350) {z[n] <- sum(is.na(prism.achilles[n,]))}
z
----------

```{r}
na.achilles <- c(277,309,323)
rownames(prism.achilles[na.achilles,])
sum(is.na(prism.achilles[na.achilles,]))
prism.achilles <- prism.achilles[-na.achilles,]
sum(is.na(prism.achilles))
dim(prism.achilles)
```

Make Prism.achilles numeric
```{r}

prism.achilles.numeric <- apply(prism.achilles, 2, as.numeric)
```




Sort Prism.cl by depmap_id resulting in prism.cl.ordered
```{r}
prism.cl[1:3,1:3]

order(prism.cl$DepMap_ID)
prism.cl.ordered <- prism.cl[order(prism.cl$DepMap_ID),]
dim(prism.cl.ordered)

rownames(prism.cl.ordered) <- 1:481
rownames(prism.cl.ordered)[1:30]
prism.cl.ordered[1:30,1:3]

```



```{r}
a <- c(1:481)

for(n in 1:481) {a[n] <- (prism.cl.ordered[n,1] %in% rownames(prism.achilles))}
prism.cl.ordered[1:3,]
b <- which(a == 0)
prism.cl.ordered.achilles <- prism.cl.ordered[-b, ]
dim(prism.cl.ordered.achilles)
rownames(prism.cl.ordered.achilles) <- 1:347

dim(prism.cl.ordered.achilles)
prism.cl.ordered.achilles
dim(prism.cl.ordered)
prism.cl.ordered.achilles[1:10,1]
rownames(prism.achilles.numeric)[1:10]
```

Find PanCan Cellines in prism.cl.achilles
```{r}
prism.cl.pancan.rownumbers <- c(which(prism.cl.ordered.achilles[,20] == 'Pancreatic Cancer'))
prism.cl.pancan.rownumbers
pancan.cl.names <- prism.cl.ordered.achilles[prism.cl.pancan.rownumbers,1]
pancan.cl.names

which(prism.cl.achilles[,20] == 'Pancreatic Cancer')

prism.cl.ordered.achilles[prism.cl.pancan.rownumbers,20]
rownames(prism.achilles.numeric)[prism.cl.pancan.rownumbers]
```
```{r}
prism.cl.ordered.achilles[1:50,20]
prism.cl.ordered.achilles[1:50,1]
```



```{r}
rownames(prism.cl.ordered.achilles)[1:10]
prism.cl.ordered.achilles[1:10,1]
rownames(prism.achilles.numeric)[1:10]
```


The data frame prism.achilles consists of gene knockdown scores. The score is a measure of how essential/important is a particular gene for the cell survival. This score reflects whether upon knocking down that genes does the cell reduce its proliferation or increases it or has no change. Smaller values refers to higher essentiality. The rows of this matrix are the gene names and the columns are the cancer cell line identifiers.

Exploration
```{r}
dim(prism.achilles.numeric)
prism.achilles.numeric[1:10,1]
```


```{r}
prism.cl.pancan
prism.achilles.numeric.pancan <- prism.achilles.numeric[prism.cl.pancan,]

prism.achilles.numeric.pancan[1:10,1]
```

## Including Plots for prism.achilles.pancan


```{r}

```

```{r}
is.numeric(prism.achilles.numeric.pancan)
hist(prism.achilles.numeric.pancan[1,])
hist(prism.achilles.numeric[1,])
quantile(prism.achilles.numeric.pancan,probs=seq(0,1,.1))
```
```{r}
quantile(prism.achilles.numeric,probs=seq(0,1,.1))
quantile(prism.achilles.numeric,prob=0.1)
quanten <- function(x){quantile(x,prob=0.1)}
quanten(prism.achilles.numeric)
```
```{r}

dim(prism.achilles.numeric)
prism.achilles.numeric[345:347,1:5]
dim(prism.achilles.numeric)
dim(prism.achilles)
rownames(prism.achilles.numeric) <- rownames(prism.achilles)
```

Neuen Dataframe fÃ¼r Untersuchungen an prism.achilles.numeric
```{r}
achilles.research.dataframe <- prism.achilles[1:10,]
achilles.research.dataframe[1:10,1:18119] <- 0
rownames(achilles.research.dataframe) <- c('max','mean','min','10%quantile','Pancanmean','empty6','empty7','empty8','empty9','empty10')

achilles.research.dataframe[1,] <- apply(prism.achilles.numeric, 2, max)
achilles.research.dataframe[2,] <- apply(prism.achilles.numeric, 2, mean)
achilles.research.dataframe[3,] <- apply(prism.achilles.numeric, 2, min)
achilles.research.dataframe[4,] <- apply(prism.achilles.numeric, 2, quanten)
achilles.research.dataframe[5,] <- apply(prism.achilles.numeric.pancan, 2, mean)
achilles.research.dataframe[6,] <- apply(prism.achilles.numeric.pancan, 2, mean)

achilles.research.dataframe[1:5,1:10]
```

