---
title: "DataCleanupTreatment"
author: "Autumn"
date: "02/06/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
source("Scripts/Presets.R")
source("Scripts/Functions.R")
```


```{r}
# removing void rows and columns from prism

clean <- row.col.cleaner(prism)
prism.clean <- as.data.frame(clean[1])
prism.fin.clean <- as.data.frame(clean[2])
rm(clean)
```


```{r}
# extract pancreatic cancer cell line data and remove void rows and columns 

clean <- row.col.cleaner(prism.extractor(prism))
pancan.clean <- as.data.frame(clean[1])
pancan.fin.clean <- as.data.frame(clean[2])
rm(clean)

extraction.verifier(pancan.clean); extraction.verifier(pancan.fin.clean)
```


```{r}
# getting pancreatic cancer disease subtypes

pancan.sts <- levels(factor(prism.cl[which(prism.cl[, "disease"] == "Pancreatic Cancer"), "disease_subtype"]))
pancan.sts

# splitting pancreatic cancer in divergent subtype dfs 



```


```{r}
st.splitter(pancan.clean)
```


```{r}
hist(apply(df.NA.to.val(pancan.clean, 2, "norm"), 2, mean), breaks = 10, main = "Histogram of Drug Efficacy across Pancreatic Cancer Cell Lines", xlab = "Mean Drug Effect")
```


Which drugs have a negative impact on general cell growth?

```{r}
unique(prism.treat[factor(names(which(apply(df.NA.to.val(prism.clean, 2, "norm"), 2, mean) < -6))), "name"])
```


Which drugs have a negative impact on pancreatic cancer cell growth?

```{r}
unique(prism.treat[factor(names(which(apply(df.NA.to.val(pancan.clean, 2, "norm"), 2, mean) < -6))), "name"])
#p <- apply(df.NA.to.val(pancan.clean, 2, "norm"), 2, mean)
#p.o <- p[order(p)]
#unique(prism.treat[factor(names(p.o)), "name"])
#prism.treat[which(paste(prism.treat[, "broad_id"]) == names(p.o)[1]), "name"]
#names(p.o)
#which(paste(prism.treat[, "broad_id"]) == "BRD.K60348325.065.09.9..10..HTS002")
```


Which drugs have a negative impact on cell growth of pancreatic cancer subtypes?

```{r}
unique(prism.treat[factor(names(which(apply(df.NA.to.val(`Pancreatic Cancer Subtype: Ductal Adenocarcinoma, exocrine`, 2, "norm"), 2, mean) < -6))), "name"])
```

```{r}
unique(prism.treat[factor(names(which(apply(`Pancreatic Cancer Subtype: Ductal Adenosquamous Carcinoma`[-which(is.na(`Pancreatic Cancer Subtype: Ductal Adenosquamous Carcinoma`))], 2, mean) < -6))), "name"])
```

```{r}
unique(prism.treat[factor(names(which(apply(`Pancreatic Cancer Subtype: Ductal Adenosquamous Carcinoma, exocrine`[-which(is.na(`Pancreatic Cancer Subtype: Ductal Adenosquamous Carcinoma, exocrine`))], 2, mean) < -6))), "name"])
```

```{r}
unique(prism.treat[factor(names(which(apply(`Pancreatic Cancer Subtype: Somatostatinoma`[-which(is.na(`Pancreatic Cancer Subtype: Somatostatinoma`))], 2, mean) < -6))), "name"])
```

